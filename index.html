<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>USAF PT Score Calculator – 2‑Mile + WHtR</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
  body {font-family:Arial,Helvetica,sans-serif; margin:0; padding:0 1rem; background:#f2f2f2;}
  .wrapper {max-width:800px; margin:2rem auto; background:#fff; padding:1.5rem;
            border-radius:8px; box-shadow:0 2px 8px rgba(0,0,0,.15);}
  h1 {text-align:center; margin-bottom:1rem;}
  form {display:flex; flex-direction:column; gap:1rem;}
  label {display:flex; flex-direction:column; font-weight:600;}
  input, select, button {width:100%; padding:.6rem; font-size:1rem;
                         border:1px solid #999; border-radius:4px; box-sizing:border-box;}
  button {background:#0066cc; color:#fff; cursor:pointer; font-weight:600;}
  button:hover {background:#0055aa;}
  .result {margin-top:2rem; padding:1rem; border:2px solid #444; background:#fafafa;}
  .pass {color:#0a0; font-weight:bold;}
  .fail {color:#c00; font-weight:bold;}
</style>
</head>

<body>
<div class="wrapper">
  <h1>USAF PT Score Calculator</h1>

  <form id="ptForm">
    <label>Gender
      <select id="gender" required>
        <option value="male">Male</option>
        <option value="female">Female</option>
      </select>
    </label>

    <label>Age (years)
      <input type="number" id="age" min="17" max="80" required placeholder="e.g. 27">
    </label>

    <label>2‑Mile Run Time (mm:ss)
      <input type="text" id="runTime"
             placeholder="e.g. 13:45"
             pattern="[0-9]{1,2}:[0-5][0-9]" required>
    </label>

    <label>Sit‑ups (1 min)
      <input type="number" id="situps" min="0" required placeholder="e.g. 45">
    </label>

    <label>Push‑ups (1 min)
      <input type="number" id="pushups" min="0" required placeholder="e.g. 30">
    </label>

    <!-- ==== NEW WHtR SECTION (inches) ==== -->
    <h3>Waist‑to‑Height Ratio (WHtR)</h3>

    <label>Waist (inches)
      <input type="number" id="waist" min="10" max="80" required placeholder="e.g. 34">
    </label>

    <label>Height (inches)
      <input type="number" id="height" min="48" max="84" required placeholder="e.g. 70">
    </label>

    <button type="submit">Calculate Score</button>
  </form>

  <div id="output" class="result" style="display:none;"></div>
</div>

<script>
/* --------------------------------------------------------------
   Helper functions
   -------------------------------------------------------------- */
function mmssToSec(str) {
  const [m, s] = str.split(':').map(Number);
  return m * 60 + s;
}
function getAgeBucket(age) {
  if (age < 25) return "<25";
  if (age <= 29) return "25-29";
  if (age <= 34) return "30-34";
  if (age <= 39) return "35-39";
  if (age <= 44) return "40-44";
  if (age <= 49) return "45-49";
  if (age <= 54) return "50-54";
  if (age <= 59) return "55-59";
  return "60+";
}
function lookupNumeric(table, value) {
  const keys = Object.keys(table).map(Number).sort((a,b)=>a-b);
  let pts = 0;
  for (let i = keys.length-1; i >= 0; i--) {
    if (value >= keys[i]) { pts = table[keys[i]]; break; }
  }
  return pts;
}
function lookupRun(table, secs) {
  const entries = Object.entries(table)
    .map(([k,v])=>[mmssToSec(k),v])
    .sort((a,b)=>a[0]-b[0]);               // ascending time
  let pts = 0;
  for (let i = entries.length-1; i >= 0; i--) {
    if (secs <= entries[i][0]) { pts = entries[i][1]; break; }
  }
  return pts;
}

/* --------------------------------------------------------------
   WHtR lookup – points & risk category (same for every bucket)
   -------------------------------------------------------------- */
const WHTR_TABLE = {
  "0.49": 20, "0.50": 19
